# λ΅λ MCP μ„λ²„

λ™ν–‰λ³µκ¶μ—μ„ λ΅λλ¥Ό μλ™μΌλ΅ κµ¬λ§¤ν•κ³  λ‹Ήμ²¨ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μλ” MCP(Model Context Protocol) μ„λ²„μ…λ‹λ‹¤.

## π“‹ κΈ°λ¥

- **λ΅λ μλ™ κµ¬λ§¤**: λ™ν–‰λ³µκ¶ κ³„μ •μΌλ΅ λ΅κ·ΈμΈν•μ—¬ λ΅λλ¥Ό μλ™μΌλ΅ κµ¬λ§¤
- **λ‹Ήμ²¨ κ²°κ³Ό ν™•μΈ**: κµ¬λ§¤ν• λ΅λ λ²νΈμ λ‹Ήμ²¨ κ²°κ³Όλ¥Ό μλ™μΌλ΅ ν™•μΈ
- **λ³΄μ• κ°•ν™”**: ID/ν¨μ¤μ›λ“λ¥Ό μ•”νΈν™”ν•μ—¬ μ•μ „ν•κ² μ €μ¥
- **Docker μ§€μ›**: λ³„λ„ μ„¤μΉ μ—†μ΄ Dockerλ΅ λ°”λ΅ μ‹¤ν–‰ κ°€λ¥

## π€ μ„¤μΉ λ° μ‹¤ν–‰ λ°©λ²•

### λ°©λ²• 1: npx μ‚¬μ© (μ¶”μ²) β΅

```bash
# κ³„μ • μ„¤μ • λ„μ°λ―Έ
npx @labforadvanced.study/lotto-mcp-server --setup

# λλ” μ§μ ‘ μΈμ½”λ”©
echo "your_id,your_password" | base64
```

**Claude Desktop μ„¤μ •:**
```json
{
  "mcpServers": {
    "lotto": {
      "command": "npx",
      "args": ["@labforadvanced.study/lotto-mcp-server"],
      "env": {
        "LOTTO_CREDENTIALS": "your_base64_credentials"
      }
    }
  }
}
```

μμ„Έν• npm μ‚¬μ©λ²•μ€ [NPM_GUIDE.md](NPM_GUIDE.md)λ¥Ό μ°Έκ³ ν•μ„Έμ”.

### λ°©λ²• 2: Docker μ‚¬μ© π³

λ³„λ„ μ„¤μΉλ‚ λΉλ“ μ—†μ΄ λ°°ν¬λ Docker μ΄λ―Έμ§€λ¥Ό λ°”λ΅ μ‚¬μ©ν•  μ μμµλ‹λ‹¤!

#### 1λ‹¨κ³„: κ³„μ • μ •λ³΄ μΈμ½”λ”©

ν„°λ―Έλ„μ—μ„ κ°„λ‹¨ν•κ² μΈμ½”λ”©:

```bash
# macOS/Linux
echo "your_lotto_id,your_password" | base64

# Windows (PowerShell)
[Convert]::ToBase64String([Text.Encoding]::UTF8.GetBytes("your_id,your_password"))

# κ²°κ³Ό μμ‹: bXlfbG90dG9faWQsbXlfcGFzc3dvcmQ=
```

#### 2λ‹¨κ³„: Claude Desktop μ„¤μ •

`claude_desktop_config.json` νμΌμ— λ‹¤μ μ„¤μ •μ„ μ¶”κ°€:

```json
{
  "mcpServers": {
    "lotto": {
      "command": "docker",
      "args": [
        "run", "--rm", "-i",
        "-e", "LOTTO_CREDENTIALS=bXlfbG90dG9faWQsbXlfcGFzc3dvcmQ=",
        "your-dockerhub-username/lotto-mcp-server:latest"
      ]
    }
  }
}
```

#### 3λ‹¨κ³„: Claude Desktop μ¬μ‹μ‘

Claude Desktopμ„ μ¬μ‹μ‘ν•λ©΄ λ°”λ΅ μ‚¬μ© κ°€λ¥ν•©λ‹λ‹¤!

```
λ΅λ 3κ²μ„ κµ¬λ§¤ν•΄μ¤
```

### λ°©λ²• 3: λ΅μ»¬ μ„¤μΉ

#### 2-1. ν•„μ μ΅°κ±΄

- Node.js 18.0.0 μ΄μƒ
- λ™ν–‰λ³µκ¶ κ³„μ • (λ―Έλ¦¬ μμΉκΈ μ¶©μ „ ν•„μ”)

#### 2-2. μ„¤μΉ

```bash
# μμ΅΄μ„± μ„¤μΉ
npm install

# Playwright λΈλΌμ°μ € μ„¤μΉ
npm run install-playwright

# λΉλ“
npm run build
```

### 3. κ³„μ • μ •λ³΄ μ„¤μ • (λ‘ κ°€μ§€ λ°©λ²•)

#### λ°©λ²• 1: κ°„λ‹¨ λ¨λ“ (Base64 μΈμ½”λ”©) - μ¶”μ² β­

```bash
# λ°©λ²• 1-A: μΈν„°λ™ν‹°λΈ λ„κµ¬ μ‚¬μ©
npm run encrypt-credentials
# μ„ νƒ: 1 (κ°„λ‹¨ λ¨λ“)

# λ°©λ²• 1-B: κ°„λ‹¨ μ¤ν¬λ¦½νΈ μ‚¬μ©
npm run simple-encode

# λ°©λ²• 1-C: ν„°λ―Έλ„μ—μ„ μ§μ ‘
echo "your_id,your_password" | base64
```

**μ¶λ ¥ μμ‹:**
```json
{
  "mcpServers": {
    "lotto": {
      "command": "node",
      "args": ["path/to/lotto-mcp-server/dist/index.js"],
      "env": {
        "LOTTO_CREDENTIALS": "eW91cl9pZCx5b3VyX3Bhc3N3b3Jk"
      }
    }
  }
}
```

#### λ°©λ²• 2: κ³ κΈ‰ λ¨λ“ (AES μ•”νΈν™”)

```bash
npm run encrypt-credentials
# μ„ νƒ: 2 (κ³ κΈ‰ λ¨λ“)
```

**μ¶λ ¥ μμ‹:**
```json
{
  "mcpServers": {
    "lotto": {
      "command": "node",
      "args": ["path/to/lotto-mcp-server/dist/index.js"],
      "env": {
        "LOTTO_ENCRYPTED_ID": "YWJjZGVmZ2hpams...",
        "LOTTO_ENCRYPTED_PASSWORD": "bXlwYXNzd29yZA...",
        "LOTTO_SECRET_KEY": "optional-custom-key"
      }
    }
  }
}
```

### 4. Claude Desktop μ„¤μ •

1. μ„μ—μ„ μƒμ„±λ μ„¤μ •μ„ `claude_desktop_config.json` νμΌμ— λ³µμ‚¬
2. `"path/to/lotto-mcp-server/dist/index.js"`λ¥Ό μ‹¤μ  κ²½λ΅λ΅ λ³€κ²½
3. Claude Desktop μ¬μ‹μ‘

### 5. κ°λ° λ¨λ“ μ‹¤ν–‰

```bash
npm run dev
```

### 6. ν”„λ΅λ•μ… μ‹¤ν–‰

```bash
npm start
```

## π› οΈ μ‚¬μ©λ²•

μ΄ MCP μ„λ²„λ” λ‹¤μ λ‘ κ°€μ§€ λ„κµ¬λ¥Ό μ κ³µν•©λ‹λ‹¤:

### 1. `purchase_lotto` - λ΅λ κµ¬λ§¤

λ™ν–‰λ³µκ¶μ—μ„ λ΅λλ¥Ό μλ™μΌλ΅ κµ¬λ§¤ν•©λ‹λ‹¤. **ID/ν¨μ¤μ›λ“λ” μ„¤μ •μ—μ„ μλ™μΌλ΅ κ°€μ Έμµλ‹λ‹¤.**

**μ…λ ¥ νλΌλ―Έν„°:**
- `count` (number): κµ¬λ§¤ν•  λ΅λ κ²μ„ μ (1-5)

**μ¶λ ¥ μμ‹:**
```json
{
  "success": true,
  "numbers": [
    [1, 14, 21, 27, 30, 44],
    [4, 5, 27, 29, 40, 44],
    [9, 18, 19, 24, 38, 42]
  ],
  "message": "3κ²μ„μ„ μ„±κ³µμ μΌλ΅ κµ¬λ§¤ν–μµλ‹λ‹¤."
}
```

### 2. `check_lotto_winning` - λ‹Ήμ²¨ ν™•μΈ

λ΅λ λ²νΈμ λ‹Ήμ²¨ κ²°κ³Όλ¥Ό ν™•μΈν•©λ‹λ‹¤.

**μ…λ ¥ νλΌλ―Έν„°:**
- `numbers` (array): ν™•μΈν•  λ΅λ λ²νΈ λ°°μ—΄ (μ: [[1,2,3,4,5,6], [7,8,9,10,11,12]])
- `round` (number, μ„ νƒμ‚¬ν•­): ν™•μΈν•  νμ°¨ (κΈ°λ³Έκ°’: ν„μ¬ νμ°¨)

**μ¶λ ¥ μμ‹:**
```json
{
  "success": true,
  "results": [
    {
      "numbers": [1, 2, 3, 4, 5, 6],
      "rank": 5,
      "matchedNumbers": [1, 2, 3]
    },
    {
      "numbers": [7, 8, 9, 10, 11, 12],
      "rank": 0,
      "matchedNumbers": []
    }
  ],
  "message": "1143νμ°¨ λ‹Ήμ²¨ κ²°κ³Όλ¥Ό ν™•μΈν–μµλ‹λ‹¤."
}
```

## π’΅ MCP ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‚¬μ©ν•κΈ°

### Claude Desktopμ—μ„ μ‚¬μ©

μ„¤μ • μ™„λ£ ν›„ Claudeμ—μ„ λ‹¤μκ³Ό κ°™μ΄ μ‚¬μ©:

```
λ΅λ 3κ²μ„ κµ¬λ§¤ν•΄μ¤
```

```
μ΄ λ΅λ λ²νΈλ“¤ λ‹Ήμ²¨ ν™•μΈν•΄μ¤: [[1,2,3,4,5,6], [7,8,9,10,11,12]]
```

## π” λ³΄μ• κΈ°λ¥

### κ°„λ‹¨ λ¨λ“ (Base64) - μ¶”μ²
- ν„°λ―Έλ„μ—μ„ `echo "id,password" | base64`λ΅ κ°„λ‹¨ μƒμ„±
- raw ν¨μ¤μ›λ“κ°€ κ·Έλ€λ΅ λ…Έμ¶λμ§€ μ•μ
- μ„¤μ • νμΌμ—μ„ ν¨μ¤μ›λ“ μ§μ ‘ ν™•μΈ λ¶κ°€
- λ€λ¶€λ¶„ μ‚¬μ©μμ—κ² μ¶©λ¶„ν• λ³΄μ• μμ¤€

### κ³ κΈ‰ λ¨λ“ (AES μ•”νΈν™”)
- AES-256-CBC λ€μΉ­ μ•”νΈν™”
- μ‚¬μ©μ μ •μ μ•”νΈν™” ν‚¤ μ§€μ›
- Base64 μ¶”κ°€ μΈμ½”λ”©μΌλ΅ λ³΄μ•μΈµ κ°•ν™”
- κ³ κΈ‰ λ³΄μ•μ΄ ν•„μ”ν• κ²½μ° μ‚¬μ©

### ν„°λ―Έλ„μ—μ„ μ§μ ‘ μƒμ„±ν•κΈ°

κ°„λ‹¨ λ¨λ“λ¥Ό ν„°λ―Έλ„μ—μ„ μ§μ ‘ μƒμ„±ν•  μ μμµλ‹λ‹¤:

```bash
# macOS/Linux
echo "your_id,your_password" | base64

# Windows (PowerShell)
[Convert]::ToBase64String([Text.Encoding]::UTF8.GetBytes("your_id,your_password"))
```

### λ³΄μ• μμ¤€ λΉ„κµ

| λ°©μ‹ | λ³΄μ• μμ¤€ | νΈμμ„± | μ‚¬μ© μƒν™© |
|------|-----------|--------|-----------|
| κ°„λ‹¨ λ¨λ“ | β­β­β­ | β­β­β­β­β­ | μΌλ° μ‚¬μ©μ, κ°μΈ PC |
| κ³ κΈ‰ λ¨λ“ | β­β­β­β­β­ | β­β­β­ | λ―Όκ°ν• ν™κ²½, κ³µμ© PC |

## β οΈ μ£Όμμ‚¬ν•­

1. **μμΉκΈ μ¶©μ „**: κµ¬λ§¤ μ „μ— λ™ν–‰λ³µκ¶ κ³„μ •μ— μ¶©λ¶„ν• μμΉκΈμ„ λ―Έλ¦¬ μ¶©μ „ν•΄λ‘μ–΄μ•Ό ν•©λ‹λ‹¤.
2. **κ³„μ • λ³΄μ•**: μ•”νΈν™”λ κ³„μ • μ •λ³΄μ™€ μ‹ν¬λ¦Ώ ν‚¤λ¥Ό μ•μ „ν•κ² κ΄€λ¦¬ν•μ„Έμ”.
3. **κµ¬λ§¤ ν•λ„**: ν• λ²μ— μµλ€ 5κ²μ„κΉμ§€λ§ κµ¬λ§¤ κ°€λ¥ν•©λ‹λ‹¤.
4. **λ‹Ήμ²¨ λ²νΈ**: λ΅λ λ²νΈλ” 1~45 μ‚¬μ΄μ μ«μ 6κ°μ—¬μ•Ό ν•©λ‹λ‹¤.
5. **λΈλΌμ°μ € μμ›**: Playwrightκ°€ Chromiumμ„ μ‹¤ν–‰ν•λ―€λ΅ μ‹μ¤ν… λ¦¬μ†μ¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

## π”§ μ„¤μ • μµμ…

`src/lotto-service.ts` νμΌμ—μ„ λ‹¤μ μµμ…μ„ μμ •ν•  μ μμµλ‹λ‹¤:

```typescript
this.lottoService = new BaseLottoService({
  controller: chromium,
  headless: true,              // falseλ΅ λ³€κ²½ν•λ©΄ λΈλΌμ°μ € μ°½μ΄ λ³΄μ„
  defaultViewport: { 
    width: 1280, 
    height: 720 
  },
  logLevel: 2                  // λ΅κ·Έ λ λ²¨ (0: ERROR, 1: WARN, 2: INFO, 3: DEBUG)
});
```

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
lotto-mcp-server/
β”β”€β”€ src/
β”‚   β”β”€β”€ index.ts              # MCP μ„λ²„ λ©”μΈ νμΌ
β”‚   β”β”€β”€ lotto-service.ts      # λ΅λ μ„λΉ„μ¤ ν΄λμ¤
β”‚   β”β”€β”€ crypto-utils.ts       # μ•”νΈν™”/λ³µνΈν™” μ ν‹Έλ¦¬ν‹°
β”‚   β””β”€β”€ encrypt-credentials.ts # κ³„μ • μ •λ³΄ μΈμ½”λ”© λ„κµ¬
β”β”€β”€ scripts/
β”‚   β””β”€β”€ simple-encode.sh      # κ°„λ‹¨ μΈμ½”λ”© μ¤ν¬λ¦½νΈ
β”β”€β”€ dist/                     # λΉλ“ κ²°κ³Όλ¬Ό
β”β”€β”€ package.json
β”β”€β”€ tsconfig.json
β””β”€β”€ README.md
```

## π› λ¬Έμ  ν•΄κ²°

### λΈλΌμ°μ € μ„¤μΉ μ¤λ¥
```bash
# Playwright λΈλΌμ°μ € μ¬μ„¤μΉ
npx playwright install chromium
```

### κ³„μ • μ •λ³΄ μ¤λ¥
```bash
# κ°„λ‹¨ λ¨λ“λ΅ μ¬μ„¤μ •
npm run simple-encode

# λλ” κ³ κΈ‰ λ¨λ“λ΅ μ¬μ„¤μ •
npm run encrypt-credentials
```

### λ΅κ·ΈμΈ μ‹¤ν¨
- IDμ™€ ν¨μ¤μ›λ“κ°€ μ •ν™•ν•μ§€ ν™•μΈ
- λ™ν–‰λ³µκ¶ μ‚¬μ΄νΈμ— μ§μ ‘ λ΅κ·ΈμΈν•΄μ„ κ³„μ • μƒνƒ ν™•μΈ
- λ³΄μ• μ„¤μ •μΌλ΅ μΈν• λ΅κ·ΈμΈ μ ν• μ—¬λ¶€ ν™•μΈ

### κµ¬λ§¤ μ‹¤ν¨
- κ³„μ •μ— μ¶©λ¶„ν• μμΉκΈμ΄ μλ”μ§€ ν™•μΈ
- λ™ν–‰λ³µκ¶ μ‚¬μ΄νΈμ μ„λΉ„μ¤ μ‹κ°„ ν™•μΈ (ν† μ”μΌ λ°¤~μΌμ”μΌ μ¤ν›„λ” μ„λΉ„μ¤ μ¤‘λ‹¨)

## π“„ λΌμ΄μ„ μ¤

MIT License

## π¤ κΈ°μ—¬

λ²„κ·Έ λ¦¬ν¬νΈλ‚ κΈ°λ¥ μ μ•μ€ μ΄μλ΅ λ“±λ΅ν•΄μ£Όμ„Έμ”.

## β–οΈ λ²•μ  κ³ μ§€

μ΄ λ„κµ¬λ” λ™ν–‰λ³µκ¶μ κ³µμ‹ APIλ¥Ό μ‚¬μ©ν•μ§€ μ•κ³  μ›Ή μ¤ν¬λν•‘μ„ ν†µν•΄ μ‘λ™ν•©λ‹λ‹¤. μ‚¬μ©μ— λ”°λ¥Έ λ¨λ“  μ±…μ„μ€ μ‚¬μ©μμ—κ² μμΌλ©°, κ³Όλ„ν• μ‚¬μ©μΌλ΅ μΈν• κ³„μ • μ μ¬λ‚ κΈ°νƒ€ λ¬Έμ μ— λ€ν•΄μ„λ” μ±…μ„μ§€μ§€ μ•μµλ‹λ‹¤.